/***
	SpellingBee.js 1.0
	
	**No copyright infringement is intended. No mirror image of this library should be made without creator's consent.
	**This is not expected to work as intended because this is my first library, so let me know if you have problems so I can update the library.
***/
(function(window, undefined) {
	var $spelling_bee = function(name) {
		// Instanciate and utilize our library
		if(window === this) {
			return new $spelling_bee(name);
		}
		
		var self = {};
		self.name = name;
		if(typeof self.name !== "string") {
			throw new Error("Spelling bee name is of the wrong type");
		}
		return self;
		
		return this;
	};
	
	$spelling_bee.fn = $spelling_bee.prototype = {
		SpellingBee: {},
		createSpellingBee: function(words, definitions) {
			//Check to see if the words and definitions are arrays
			if(typeof words === Array && typeof definitions === Array) {
				SpellingBee.spellingbee = document.createElement("form");
				SpellingBee.spellingbee.setAttribute("name", "spelling-bee");
				SpellingBee.spellingbee.setAttribute("method", "POST");
				
				for(var j = 0; j < definitions.length; j++) {
					for(var i = 0; i < words.length; i++) {
						var label = document.createElement("label");
						var myLabel = document.createTextNode(definitions[i]);
						label.appendChild(myLabel);
						SpellingBee.spellingbee.appendChild(label);
						
						var spellingArea = document.createElement("input");
						spellingArea.setAttribute("type", "text");
						spellingArea.setAttribute("name", "spell");
						SpellingBee.spellingbee.appendChild(spellingArea);
						
						var checkButton = document.createElement("input");
						checkButton.setAttribute("type", "submit");
						checkButton.setAttribute("value", "Check");
						checkButton.onclick = function() {
							//Check to see if a word was entered into the input
							var field = document.forms["spelling-bee"]["spell"].value;
							
							if(field == null || field == "") {
								window.alert("You have not made an attempt to spell a word. Please fill out the field.");
							} else {
								var word = new RegExp(words[i], i);
								var input = new RegExp(field, i);
								
								if(field === word) {
									var correctStatement = "Correct!"
									var division = document.createElement("div");
									var $paragraph = document.createElement("p");
									var pText = document.createTextNode(correctStatement);
									pText.style.color = "green";
									pText.style.fontSize = "20px";
									
									$paragraph.appendChild(pText);
									division.appendChild($paragraph);
									document.body.appendChild(division);
								} else {
									window.alert("Try again!");
								}
							}
						};
						SpellingBee.spellingbee.appendChild(checkButton);
						
						document.body.appendChild(SpellingBee.spellingbee);
					}
				}
			} else {
				throw new Error("Either the words or definitions aren't arrays, or you have only one word and definition as parameters. You need an array of words and definitions to pass.");
			}
		},
		
		removeSpellingBee: function() {
			//Remove the entire spelling bee with document.body.removeChild()
			document.body.removeChild(SpellingBee.spellingbee);
		},
		
		importSpellingBee: function() {
			//Define function that locates elements based on its attribute.
			function findElementByAttribute(attr, val) {
				var allElements = document.getElementsByTagName('*');
				for(var i = 0; i < allElements.length; i++) {
					if(allElements[i].getAttribute(attr) == value) {
						return allElements[i];
					}
				}
			};
			
			var spellingBeeForm = findElementByAttribute("name", "spelling-bee");
			var externalSpellingBee = document.importNode(spellingBeeForm, true);
			document.body.appendChild(externalSpellingBee);
		}
	};
	
	window.$spelling_bee = $spelling_bee;
})(window);
